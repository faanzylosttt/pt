<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Media-to-Link Hub</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f5f5f5;margin:0;padding:2rem}
    .box{max-width:480px;margin:auto;background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
    h1{text-align:center;margin-bottom:1.5rem}
    label{display:block;margin:.75rem 0 .25rem;font-weight:bold}
    input,select{width:100%;padding:.5rem;border:1px solid #bbb;border-radius:4px}
    button{width:100%;padding:.75rem;background:#2563eb;color:#fff;border:none;border-radius:4px;margin-top:1rem;cursor:pointer}
    button:disabled{background:#93c5fd}
    .result{margin-top:1rem}
    .result a{color:#2563eb;font-weight:bold}
    .result img{max-width:100%;margin-top:.5rem;border-radius:4px}
  </style>
</head>
<body>
  <div class="box">
    <h1>Upload & Dapatkan Link Langsung</h1>

    <label for="file">Pilih file:</label>
    <input type="file" id="file" accept="image/*,video/*,audio/*">

    <label for="provider">Layanan upload:</label>
    <select id="provider">
      <option value="catbox">Catbox (unlimited, no login)</option>
      <option value="litterbox">Litterbox (Catbox temp 1h-3d)</option>
      <option value="fileio">File.io (auto delete 1x download)</option>
      <option value="gofile">GoFile (unlimited)</option>
      <option value="transfer">Transfer.sh (14 hari)</option>
    </select>

    <button id="uploadBtn">Upload & Dapatkan Link</button>

    <div id="output" class="result" style="display:none">
      <p>Link langsung: <a id="directLink" href="" target="_blank"></a></p>
      <div id="preview"></div>
    </div>
  </div>

  <script>
    const fileInput   = document.getElementById('file');
    const providerSel = document.getElementById('provider');
    const uploadBtn   = document.getElementById('uploadBtn');
    const output      = document.getElementById('output');
    const directLink  = document.getElementById('directLink');
    const preview     = document.getElementById('preview');

    uploadBtn.addEventListener('click', async () => {
      const file = fileInput.files[0];
      if (!file) { alert('Pilih file dulu'); return; }

      uploadBtn.disabled = true;
      uploadBtn.textContent = 'Uploading...';

      const provider = providerSel.value;
      try {
        let url;
        switch (provider) {
          case 'catbox':
            url = await uploadCatbox(file);
            break;
          case 'litterbox':
            url = await uploadLitterbox(file);
            break;
          case 'fileio':
            url = await uploadFileio(file);
            break;
          case 'gofile':
            url = await uploadGofile(file);
            break;
          case 'transfer':
            url = await uploadTransfer(file);
            break;
        }
        showResult(url);
      } catch (err) {
        alert('Gagal upload: ' + err.message);
      } finally {
        uploadBtn.disabled = false;
        uploadBtn.textContent = 'Upload & Dapatkan Link';
      }
    });

    async function uploadCatbox(file) {
      const fd = new FormData();
      fd.append('reqtype', 'fileupload');
      fd.append('fileToUpload', file);
      const res = await fetch('https://catbox.moe/user/api.php', { method: 'POST', body: fd });
      return res.text(); // url langsung
    }

    async function uploadLitterbox(file) {
      const fd = new FormData();
      fd.append('reqtype', 'fileupload');
      fd.append('time', '1h'); // 1h, 12h, 24h, 72h
      fd.append('fileToUpload', file);
      const res = await fetch('https://litterbox.catbox.moe/resources/internals/api.php', { method: 'POST', body: fd });
      return res.text();
    }

    async function uploadFileio(file) {
      const res = await fetch('https://file.io/?expires=1w', { method: 'POST', body: file });
      const json = await res.json();
      return json.link;
    }

    async function uploadGofile(file) {
      const serverRes = await fetch('https://api.gofile.io/getServer');
      const { data: { server } } = await serverRes.json();
      const fd = new FormData();
      fd.append('file', file);
      const up = await fetch(`https://${server}.gofile.io/uploadFile`, { method: 'POST', body: fd });
      const { data: { downloadPage } } = await up.json();
      return downloadPage;
    }

    async function uploadTransfer(file) {
      const res = await fetch(`https://transfer.sh/${file.name}`, { method: 'PUT', body: file });
      return res.text();
    }

    function showResult(url) {
      directLink.href = directLink.textContent = url;
      preview.innerHTML = '';
      if (fileInput.files[0].type.startsWith('image/')) {
        const img = document.createElement('img');
        img.src = url;
        preview.appendChild(img);
      }
      output.style.display = 'block';
    }
  </script>
</body>
</html>
